{% extends 'base.html' %}
{% load static %}

{% load crispy_forms_tags %}

{% block page %}
    <div class="container-fluid" style="justify-content: space-around; margin-left: 50px;">
        <div class="col-6" style="justify-content: space-around; ">
            <div class="row">
                <img class="card-img-top" style=" margin-top: 10px; width: 35%;" src="{{ product.image.url }}">
                <ul class="list-group" style="margin-top: 60px;">
                    <h2 style="font-size: 15px; color: rgb(61, 26, 26);">Пользователь: <a href="{% url 'account:user' user.id %}">{{ product.author }}</a></h2>
                    ID пользователя: {{ product.author.id }}
                    <li class="list-group-item">{{ product.name }}</li>
                    <li class="list-group-item">Цена: {{ product.price }}</li>
                    <li class="list-group-item">Описание: {{ product.description|linebreaks }}</li>
                    <li class="list-group-item">Номер телефона: {{ product.phone_number }}</li>
                    
                    
                    <button><a href="{% url 'products:add_to_cart' product.id %}" > Добавить в корзину </a> </button>
                </ul>
            </div>
        </div>
    </div>
    <div style="margin-left: 50px;">
        {% with comments.count as total_comments %}
        <h2>
            {{ total_comments }} отзывов 
        </h2>
        {% endwith %}
    
        {% for comment in comments %}
        <div class="comment">
            <p class="info">
                Отзыв: <br>
                {{ comment.user }}:
                {{ comment.text }}
                <p style="font-size: 12px; margin-top: -15px;">{{ comment.created }}</p>
            </p>
            {{ comment.body|linebreaks }}
                
        </div>
        {% empty %}
            <p>Нет отзывов</p>
        {% endfor %}
        

        {% if new_comment %}
            <h2>Ваш отзыв был добавлен</h2>
        {% else %}
            <hr>
                <h5>Добавить новый комментрий</h5>
                <form method="post">
                    <p style="height: 25spx;">
                        {{ comment_form|crispy }}
                        {% csrf_token %}
                        <input type="submit" value="Добавить">
                    </p>
                </form>
        {% endif %}
    </div>

{% endblock %}